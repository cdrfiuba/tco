\documentclass[a4paper,12pt]{article}	%Hoja A4, tamaño de letra 12 puntos
\usepackage[latin1]{inputenc}		%Encoding del archivo de texto plano (txt), así podés escribir letras con diacríticas 
\usepackage[T1]{fontenc}		%Encoding de la fuente
\usepackage[spanish]{babel} 		%Estilos, hyphenation y nombres de entornos (abstract-->resumen) en español
\usepackage{times}			%Para agregar la fecha al documento		
\usepackage{amsmath}			%Simbolos matemáticos que sino no funcionan
\usepackage{amssymb}             	%Simbolos matemáticos que sino no funcionan
\usepackage{amsfonts}            	%Fuentes extras para modo mátemático
\usepackage{units}               	%Para agregar unidades y fracciones con formato especial
\usepackage{esint}               	%Para integrales dobles cerradas
%\usepackage{wasysym}            	%Para integrales dobles cerradas (no tan lindo como las de `esint')
%\usepackage{pdfpages}			%Para incluir otros pdfs, en un nuestro documento Latex
%\usepackage{eso-pic}
%\usepackage{everyshi}
%\usepackage{ifthen}
%\usepackage{calc}
%\usepackage{watermark}          	%Permite incluir marcas de agua
\usepackage{float}               	%Permite fijar una figura a un lugar específico del archivo con el parámetro [H] 
\usepackage{fancyhdr}			%Manejo enriquecido de encabezados y pie de página
\usepackage{fancybox}            	%Permite agregar marcos especiales en las páginas
%\usepackage{anysize}			%Habilita el comando \marginsize{left}{right}{top}{bottom}
%\usepackage{mathptmx}			%Tipografía Times
\usepackage[pdflatex]{graphicx}		%Permite incluir imágenes en el documento. Usando ``dvipdfm'' se pueden manejararchivos jpg, jpeg, png, y pdf. Pero hay que generar un archivo .bb que contiene el tamaño de la imagen entre otros datos. Para eso miktex-->bin-->ebb.exe 
\usepackage{threeparttable}		%Permite agregar notas al pie en tablas
\usepackage{cancel}			%Permite tachar cosas en modo matemático
					%hyperref posibilita referencia internas y externas, a continuacion las opciones de config:
\usepackage[a4paper,
            dvipdfm,             	%Usar sólo si después se va a pasar de dvi a pdf
					%dvips,%				   
					%Usar si se va a trabajar en dvi, o si después se va a pasar de dvi a ps (y eventualmente de ps a pdf ---pero ojo que los enlaces quedan más lindos si se pasa directamente de dvi a pdf, usando dvipdfm)
	pdfdisplaydoctitle=true, 	%Muestra el título en el marco superior de la ventana del visor de pdf
	colorlinks=true,     		%Al encender esta función, ya nohay recuadros feos alrededor de los links
	pdfnewwindow=true,   		%Para que el link a nuevos pdf, no se abran en la misma ventana
	linkcolor=black,     		%Color para links internos
    	citecolor=green,     		%Color para links a Bibliografia
        filecolor=blue,      		%Color para links a archivos

				pdftitle={Proyecto (66.09) [Junio 2013] - TCO},
				pdfauthor={Sebastian Cerone, Ignacio Carballeda y Gisella Farase}]
				{hyperref}					


\newcommand{\autor}[3]{\vspace{5mm}%
											{\bf #1}\\%
											{\bf Padrón:} #2\\%
											\texttt{#3}\\}


%Determinación del estilo de página (encabezado y pie)

\lhead{\small Proyecto (66.09) [Junio 2013]}
\chead{}
\rhead{\small TCO}
\rfoot{}
\cfoot{Página {\thepage}}
\lfoot{}

%Manejo de márgenes

%\marginsize{left}{right}{top}{bottom}
\addtolength{\textwidth}{2cm}  %Agrega 2cm al ancho por defecto (usado junto con hoffset, no se pierde el centrado)
\addtolength{\hoffset}{-1cm}   %Quita 1cm al margen, pero mantiene la relación repecto de cada margen
\addtolength{\textheight}{2cm}
\addtolength{\voffset}{-1cm}
\setlength{\headheight}{14pt}


%Manejo de contadores (counters)

%\setcounter{tocdepth}{2}	  %Profundidad de la aparición de las secciones en el índice:
									  %-1 Part, 0 Chapter, 1 Section, 2 Subsection, 3 Subsubsection, 4 Titled

\setcounter{secnumdepth}{1}  %Profundidad en la enumeración de las secciones:
%-1 Part, 0 Chapter, 1 Section, 2 Subsection, 3 Subsubsection, 4 Titled paragraph, 5 Titled subparagraph %paragraph, 5 Titled subparagraph


%==================================== Comienzo del documento ===================================
 
\begin{document}	
					
%========================================== Caratula ===========================================

\pagestyle{fancy}

%\includegraphics{caratula6609.pdf}
%\thispagestyle{empty}

%======================= Carátula que no se usa poruqe hay una oficial =========================

%\newpage
%Empiezo la caratula
%\setlength{\unitlength}{1 cm}
%\thispagestyle{empty}
%\begin{picture}(5,4)
%\put(-1,0){\includegraphics{./img/fiuba}}
%\end{picture}
%\vspace{3cm}
%
%\begin{center}
%\textbf{\LARGE Laboratorio de Microcomputadoras [66.09]}\\

%\vspace{2cm}
%
%{\Large \textbf{ Proyecto TCO\\[1.25cm]}}
%
%\vspace{2cm}
%{\textbf{Primer Cuatrimestre 2013\\[1.25cm]
%}}
%\vspace{2cm}

%\begin{tabbing}
%\hspace*{3cm} \= \hspace*{3cm} \= \hspace*{3cm}\= \hspace*{3cm} \kill
%\textbf{Nombre} \> \textbf{Apellido} \> \textbf{Padrón} \> \textbf{Mail} \\
% \>  \>  \>  \\
%Sebastian \> Cerone \> 90259 \> sebascerone@gmail.com\\
%Gisela \> Farace \> xxxxx \> xxx@gmail.com\\
%Ignacio L. J. \> Carballeda \> 91646\> carballeda.ignacio@gmail.com\\
%\end{tabbing}
%\end{center}

%\newpage

%===============================================================================================

%=========================================== Presentación ======================================



\begin{figure}[H]
\vspace{35mm}
		\includegraphics[width=160pt]{img/img8.jpg}
\end{figure}	

\vspace{-58mm}
\begin{figure}[H]
\hspace{100mm}
		\includegraphics[width=160pt]{img/img13.jpg}
\end{figure}

\vspace{-10mm}
\begin{figure}[H]
	\begin{center}
		\includegraphics[width=250pt]{img/img9.jpg}
	\end{center}
\end{figure}

%===============================================================================================

%=========================================== Indice ============================================
\newpage

\tableofcontents							

\newpage

%=========================================== Informe ===========================================

\section{Motivación}

	La motivación de este proyecto está dada por una de las aplicaciones que puede desprenderse de la rama de la Robótica, que investiga la manera óptima de hacer interactuar a un conjunto de robots, en un ambiente determinado, para cumplir un objetivo común, que hubiera sido dificultoso de resolver en forma individual por cada uno de los integrantes del conjunto. O bien, por la naturaleza del problema, no fuese útil disponer de un solo robot, sino que es inherentemente necesario disponer de una \emph{Red} de individuos. 
	
	Esta aplicación a la que se hizo referencia al principio de este texto, es aquella vinculada al uso de una red de robots en un área de desastre, o de difícil acceso para los humanos. En la cuál estos robots pudieran buscar explosivos, objetos específicos, o incluso buscar por personas en situación riesgosa, que requieran de ayuda, ejemplo, en caso de haber sido víctimas de algún fenómeno natural, o de otro tipo.
	
	Planteado el problema, se podría pensar en un conjunto de individuos (robots), cada uno de los cuales no estuviera preparado para resolver cualquier tipo de problema, sino que estuvieran dotados de sistemas que les permitieran reconocer un área, mapearla, tomar datos varios relacionados con el entorno, y eventualmente transmitirlos a un grupo humano, u otro grupo de robots, que al recorrer la misma zona, ya estarían advertidos de morfología del lugar, e incluso de ciertos peligros puntuales, de los que tuvieran que mantenerse alejados. 

\vspace{5mm}
\section{Objetivo}
	Dado el marco introductorio, y como una mínima introducción a lo que podría considerarse el mapeo de un entorno, seguido de un aprendizaje sobre el mismo, y transmisión de tal aprendizaje. El objetivo principal del proyecto es implementar un móvil que tenga la capacidad de resolver cualquier laberinto plano matricial, y tener capacidad de almacenar un camino posible hasta la salida, descartando del mismo cualquier camino sin salida que haya recorrido. 

   Una vez recorrido el laberinto y, habiendo aprendido una de las soluciones posibles para el mismo. El primer móvil o robot, deberá transmitir a un segundo robot la información necesaria para que este último pueda resolver el laberinto en un solo intento, sin cometer errores.

\newpage

\section{Descripción general}

\subsection{Robot Principal:}
	Para llevar a cabo el proyecto se partió del uso de dos autos ya construídos en cuanto a su mecánica, que sirvieron de plataforma para sumarle toda la electrónica relacionada a la solución del problema propuesto.
	
	El robot principal cuenta con cinco sensores de tipo infrarrojo. Dos de los sensores, de corto alcance y contenidos cada uno en un encapsulado dentro del cual se hayan un emisor y un receptor, se emplearon para el posicionamiento dentro del laberinto; dado que el mismo tiene una forma representable matricialmente (ya sea rectangular o cuadrado), las posiciones dentro del mismo se guardan en una matriz cargada en memoria, con lo cual cada robot, para poder tomar una decisión tiene que saber cuál es espacio actual. Estos sensores le dan la capacidad de interpretar al arribo a una nueva celda, mediante la detección de líneas negras en cada celda de fondo blanco, vía un cambio de nivel en sañal de salida del receptor.
	
	Otro conjunto de tres sensores con emisores tipo LEDs infrarrojos (IR), y receptores infrarrojos con un filtro de detección centrado en 38 kHz, de modo que la luz ambiente no pueda distorsionar su lectura, se encuantran ubicados en la parte superior de robot, permitiéndole detectar las paredes a su alrededor, dentro del laberinto. Al tener estos sensores una sensibilidad de aproximadamente 5cm, se tiene un alcance adecuado para leer paredes a una distancia que permita que las paredes estén lo sufucientemente alejadas del robot como para que pueda moverse libremente dentro de cada celda, a la vez que no tan grande como para detectar objetos más allá del alcance de una celda, es decir, no puede ver paredes de otra parte del laberinto.
	
	La motricidad del robot está dada por dos motores de corriente continua, cuyo sentido y velocidad final están controladas por medio de un puente H, que a su vez es controlado mediante el uso de PWMs generados desde el microcontrolador. 

\subsection{Robot Secundario:}
	En esencia el robot secundario posee las mismas características que el robot principal, excepto que no cuenta con los sensores de paredes, tan solo para enfatizar el hecho de que no tiene ninguna realimentación sobre el entorno en el que se mueve. solo cuenta con los sensores que le permiten identificar la llegada a una nueva celda (los inferiores), para valerse de una referencia que le permita dar el siguiente paso, basado en la información que le fue transferida por el robot principal.
	
\subsection{Laberinto:}
	El laberinto fue modelizado como una matriz perteneciente a $\mathbb{R}^{5x5}$, donde las paredes internas del mismo, definen \emph{celdas} que se pueden interpretar como posiciones dentro de la matriz.
	
	El mismo se contruyó en blanco porque sobre este color es óptimo el rebote de luz infrarroja para los sensores de las paredes, y mejor aún es para el caso del suelo, en el cual las marcas negras sobre fondo blanco dan un gran constraste, lo que se traduce en un marcado cambio de nivel en la señal de salida, y facilita la detección.
	
	Como se mencionó subyacentemente en párrafos previos, cada celda se marcó con líneas negras dispuesta en forma de cuadrado. La primera de estas líneas sirve a los robots para ``saber'' que a llegado a una nueva celda, la segunda línea les da la referencia para detenerse y quedar, de esta forma, posicionados en el centro de la celda. Esto último es debido a que los robots no cuentan \emph{encoders} ni ningún tipo de sensor que brinde una realimentación para saber la posición exacta dentro de una celda. El hecho de que las líneas formaran un cuadrado, es porque los robots podrían venir de varias direcciones; es decir, al doblar para tomar un camino alternativo, atravesarían las celdas en sentido transversal al sentido de avance original.

\section{Algoritmo}
	El algoritmo implementado para dotar a los robots de ``inteligencia'', se basa en una mezcla entre \emph{Backtracking} y \emph{Flood-fill}. Ambos son algoritmos con aplicaciones en muchas áreas de la Informática, la Matemática, y el procesamiento de imágenes, entre otras.
	
	Lo que se hizo en este caso puntual fue una adaptación de los mismos, aplicado al problema resolver. 
	
\subsection{Backtracking:}
	De backtracking (Ver: \href{infoalgoritmo/backtracking}{El Esquema Algorítmico del Backtracking}) se tomó un aproximación a lo que se conoce como ``El problema del laberinto'', que se basa en suponer que se conoce las posiciones de la entrada y la salida al laberinto; digamos, la entrada en $[5,1]$ y la salida en $[1,5]$. Y a partir de ahí se establecen reglas de decisión. Estas reglas de decisión se consideran cada vez que el robot avanza una ubicación y evalúa su situación actual. En ese momento chequeará una primera condición que en este caso le dice que debe avanzar a menos que le esté prohibido (una pared se lo impide), y en caso de no poder, debe doblar a la derecha. Si en lugar de esto último, tiene todas las celdas adyacentes, bloquedas, debe retroceder y volver a evaluar la posibilidad de tomar un camino alternativo, para alcanzar la salida. Por otra parte, un vez que el robot dobló para desplazarse en una nueva dirección dentro del laberinto, el mismo acude a una suerte de brújula que le indica su nueva dirección y sentido y, basándose en que sigue conociendo la ubicación de la salida, cambia la regla de decisión; es decir, si primeramente su regla era ``avanzar hasta que no pueda hacerlo y doblar a la derecha si no tengo permitido el avance'', al haber doblado a la derecha, su nueva regla sería ``doblar a la izquierda si es posible, o en caso contrario, seguir avanzando''. Y así con todas posibles direcciones y sentidos dentro el laberinto, de modo de avanzar siempre a una posición que lo acerque a la salida.

\newpage
	
\subsection{Flood-fill:}
	De Flood-fill (Ver: \href{infoalgoritmo/TheFloodfill.pdf}{The Flood-fill Algorithm}), por otro lado, se rescata el \emph{peso} que este algoritmo le asigna a cada celda o posición en la matriz. Es decir, Se parte de una matriz que tiene pesos asignados de forma tal que si no hubiera obstáculos, el robot encontraría naturalmente la salida, moviéndose por una suerte de ``gradiante negativo'', o sea, se desplaza de celdas de mayor peso, a celdas de menor peso.
	
	Esta parte del algoritmo, que de todas maneras interviene en la toma de decisiones del robot para un laberinto con la estructura mencionada en la sección de backtracking, cobraría mayor importancia si la salida se encontrara en el medio del laberinto. En este caso no alcanzaría solo con avanzar, doblar, o retroceder en función únicamente de una regla de avance, sino que habría que tener en cuenta los pesos de todas las celdas en todo momento, y actualizarlos de modo de ir asignando mayor peso a las celdas que conducen a caminos erróneos, y menor peso a aquellas que nos acercan a la salida.
	
\subsection{Resumen de funcionamiento:}	
	En conclusión, al hacer uso de una parte de ambos algoritmos, el robot obtiene cierta flexibilidad para moverse en laberintos con formas variadas de las cuales, por otra parte no necesita conocer demasiados datos. Y para los cuales podría ponderar más un tipo de comportamiento o el otro, según el caso.
	
\newpage

\section{Listado de componentes}

\subsection{Robot principal:}

\begin{tabular}{|l|r|r|r|r|}\hline
	{\bf Referencia}	 &	{\bf Descripción}	 &{\bf Cantidad} &	{\bf Precio unitario} & {\bf Total} \\			
\hline		
		R11, R9, R10&1.5k & 3    &    &    \\
\hline      
      R19, R12, R13, R14, R18&100&  5&    &    \\    
\hline      
	  C3& 100n&  1&    &    \\
\hline      
	  C2, C1& 100u&  2&    &     \\ 
\hline
     C6,C7,C8 & 10u & 3 & & \\	   
\hline      
	  RV2, R1, R2, R3, R4, R5, R6, RV1 & 10k&  8&    &      \\
\hline      
D1, D2, D3, D4, D6, D7, D8,D9  & 1N4148&  8&    &   \\    
\hline      
	  C5&  22u&  1&    &       \\
\hline      
	  R15, R16,R17 & 330&  3&    &    \\    
\hline      
	  R8&  390&  1&    &       \\
\hline      
	  R7& 4.7K&  1&    &     \\  
\hline      
	  C4&  470n&  1&    &     \\   
\hline      
	  Q3, Q1, Q2& BC548&  3&    &   \\    
\hline
	  IC1&C8051F330D&  1&    &       \\
\hline      
	  U4, U3&  CNY70&  2&    &      \\
\hline      
	  P1&CON. BAT&  1&    &       \\
\hline      
	  P7& CONN\_1&  1&    &      \\
\hline      
	  D10&   IR1&  1&    &        \\
\hline   
   D11&   IR2&  1&    &        \\
\hline      
	  D12&  IR3&  1&    &       \\
\hline      
	  K1&IRU101533&  1&    &      \\ 
\hline      
	  k4, k2, k3&  ISU60&  3&     &   \\    
\hline      
	  U2&  L298D&  1&    &      \\
\hline      
	  D5&  LED\_1&  1&    &     \\
\hline     
	  U1& LM2940&  1&    &       \\
\hline      
	  P3& MOTOR\_L&  1&    &      \\
\hline     
	 P4& MOTOR\_R&  1&    &      \\
\hline     
	 P2& PROG&  1&    &      \\
\hline   
   SW1& RE-TRANS&  1&    &    \\   
\hline   
   P5& RF\_EMIT&  1&    &        \\
\hline 
 P8& SENS PLACA&  1&    &       \\
\hline 
 P9&  SENS uC&  1&    &       \\
\hline 
 SW2&  SW\_PUSH&  1&    &       \\
\hline 
 P10&SWITCH\_GRAL&  1&    &       \\
\hline   
   P6&   Tx/Rx&  1&    &     \\\hline
\end{tabular}

\newpage

%\begin{itemize}

%ACA VA UNA REFERENCIA A LOS DATASHEETS

%\item Placa virgen FR4 de 10mc x 10cm                         (1)
%\item Microprocesador SiLabs 8051F330                         (1)
%\item Puente H dual L298 												  (1)
%\item Regulador de tensión de 5V de baja caída LM2940         (1)
%\item Regulador de tensión de 3.3V de baja caída IRU101533    (1)
%\item Emisor IR y Fotorreceptor (en un solo encapsulado) CNY70(2)
%\item Emisores IR LEDs                                        (3)
%\item Fotoreceptores IS1U60, con filtro pasabandas en 38kHz   (3)
%\item Conectores Molex  de dos vías                           (3)              
%\item Conectores de cable plano de 10 hilos                   (1) 
%\item LED color rojo                                          (1)
%\item Resistencias $100\Omega$ 			(3)   
%\item Resistencias $330\Omega$ 			(3)
%\item Resistencias $1k\Omega$  			(3)
%\item Resistencias $220\Omega$ 			(1)
%\item Resistencias $4.7k\Omega$			(1)
%\item Resistencias $10k\Omega$ 			(6)
%\item Capacitores  $10\mu$F   			(5)		
%\item Capacitores  $100\mu$F  			(2)
%\item Capacitores  $100n$F     			(1)
%\item Transistores BC548       			(3)
%\item Diodos 1N4148            			(8)
%\item Pulsadores               			(2)
%\item Módulo emisor de RF a 418MHz     (1)
 
%\end{itemize}

%\newpage

\subsection{Robot secundario:}

\begin{itemize}

\item Placa experimental FR2 de 10mc x 10cm                   (1)
\item Microprocesador SiLabs 8051F330                         (1)
\item Puente H dual L298 												  (1)
\item Regulador de tensión de 5V de baja caída LM2940         (1)
\item Regulador de tensión de 3.3V de baja caída IRU101533    (1)
\item Emisor IR y Fotorreceptor (en un solo encapsulado) CNY70 (2)
\item Conectores Molex  de dos vías                           (3)              
\item Conectores de cable plano de 10 hilos                   (1) 
\item LED color amarillo                                      (1)
\item Resistencias $100\Omega$ 			(3)   
\item Resistencias $330\Omega$ 			(3)
\item Resistencias $1k\Omega$  			(3)
\item Resistencias $220\Omega$ 			(1)
\item Resistencias $4.7k\Omega$			(1)
\item Resistencias $10k\Omega$ 			(6)
\item Capacitores  $10\mu$F   			(5)		
\item Capacitores  $100\mu$F  			(2)
\item Capacitores  $100n$F     			(1)
\item Transistores BC548       			(3)
\item Diodos 1N4148            			(8)
\item Pulsador                			(1)
\item Módulo receptor de RF a 418MHz   (1)

\end{itemize}

%\newpage


\section{Herramientas de software}

\begin{itemize}

\item Keil $\mu$Vision 4 (v4.02): IDE para desarrollo del firmware.
\item \href{http://kicad.sourceforge.net/wiki/index.php/Main_Page}{KiCAD (Build: 20100406 SVN-R2508)-final: Diseño de esquemáticos y ruteo de placas}
\item CuteCom (v0.22.0): Captura de datos por puerto serie (S.O. Linux - Ubuntu)
\item \LaTeX (compilado con MikTeX v2.7):Lenguaje para paginado de este informe
\item TeXnicCenter (v1.0): Editor de textos para \LaTeX

\end{itemize}


%\newpage

\section{Bibliografía}

\begin{itemize}

\item \href{http://www.scribd.com/doc/13138464/The-8051-Micro-Controller-Book-by-Scott-Mackenzie-Online}{I.Scott Mackenzie, "The 8051 Microcontroller",Prentice Hall, 1995}
\item \href{datasheets/C8051F33x.pdf}{Datasheet del Microcontrolador 8051F330}
\item \href{infoalgoritmo/InteligenciaArtificialyRedesNeuronales.pdf}{M. Daniela López De Luise,"Inteligencia Artificial y Redes Neuronales", EnterpriseWare SRL, Junio de 2001}
%\item \href{infoalgoritmo/TheFloodfill.pdf}{The Flood-fill Algorithm ()}
%\item \href{infoalgoritmo/backtracking}{El Esquema Algorítmico del Backtracking}
\end{itemize}

\section{Apéndice}

\subsection{Esquemáticos:}

\begin{itemize}

\item \href{robotesquematico.pdf}{Esquematico versión pdf}
%\item \href{diseno/placa_robot.pro}{Esquematico y board en versión KiCAD}

\end{itemize}

\subsection{Links útiles:}

\begin{itemize}
\item \href{http://en.wikipedia.org/wiki/Maze_solving_algorithm}{Wikipedia - Resumen de los algoritmos más conocidos 
para resolución de laberintos}
\item \href{http://www.micromouseinfo.com/}{Página dedicada a competencias de \emph{Micromouse} (Resolvedores de laberintos)}
\item \href{http://sensorwiki.org/doku.php}{Referencia a un gran número de sensores diferentes}
\item \href{http://www.societyofrobots.com}{Página dedicada a la robótica en general}
\end{itemize}

\subsection{Diagrama en bloques (*)}

\subsection{Diagrama de flujo (*)}

\subsection{Código fuente (*)}

\small *Ver páginas adjuntas a este informe.

\end{document}


